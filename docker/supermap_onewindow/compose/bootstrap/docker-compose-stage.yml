version: '2'
# 绵阳一窗受理项目，基础应用部署
services:
  #spring boot admin
  spring-boot-admin-server:
    image: supermap/spring-boot-admin-server:latest
    container_name: supermap.stage.spring-boot-admin-server
    volumes:
      - /home/docker/supermap_onewindow/logs/stage:/home/log
    #env_file:
    #  - /home/docker/supermap_onewindow/env/application-stage.env
    environment:
      - JAVA_OPTS=-Dspring.profiles.active=stage
      - TZ=Asia/Shanghai
    networks:
      - one-window
    ports:
      - 18770:8770
  #网关
  cloud-gateway:
    image: supermap/cloud-gateway:latest
    container_name: supermap.stage.cloud-gateway
    volumes:
      - /home/docker/supermap_onewindow/logs/stage:/home/log
    #env_file:
    #  - /home/docker/supermap_onewindow/env/application-stage.env
    environment:
      - JAVA_OPTS=-Dspring.profiles.active=stage
      - TZ=Asia/Shanghai
    networks:
      - one-window
    ports:
      - 18768:8768
networks:
  one-window:
    external:
      name: one-window